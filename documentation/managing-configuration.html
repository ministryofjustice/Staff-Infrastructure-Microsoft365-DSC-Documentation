<!doctype html>
<html lang="en" class="govuk-template no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>M365 Configuration as Code - Technical Guidance</title>

    <link href="../stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://ministryofjustice.github.io/Staff-Infrastructure-Microsoft365-DSC-Documentation/documentation/managing-configuration.html">

      <meta name="robots" content="noindex" />
      <meta name="twitter:card" content="summary" />
      <meta name="twitter:domain" content="ministryofjustice.github.io" />
      <meta name="twitter:image" content="https://ministryofjustice.github.io/Staff-Infrastructure-Microsoft365-DSC-Documentation/images/govuk-large.png" />
      <meta name="twitter:title" content="M365 Configuration as Code - Technical Guidance" />
      <meta name="twitter:url" content="https://ministryofjustice.github.io/Staff-Infrastructure-Microsoft365-DSC-Documentation/documentation/managing-configuration.html" />

      <meta property="og:image" content="https://ministryofjustice.github.io/Staff-Infrastructure-Microsoft365-DSC-Documentation/images/govuk-large.png" />
      <meta property="og:site_name" content="M365 Configuration as Code - Technical Guidance" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://ministryofjustice.github.io/Staff-Infrastructure-Microsoft365-DSC-Documentation/documentation/managing-configuration.html" />

    
  </head>

  <body class="govuk-template__body">
    <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>

    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="/" class="govuk-header__link govuk-header__link--homepage">
        <span class="govuk-header__logotype">
          <svg
            aria-hidden="true"
            focusable="false"
            class="govuk-header__logotype-crown"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 132 97"
            height="30"
            width="36"
          >
            <path
              fill="currentColor" fill-rule="evenodd"
              d="M25 30.2c3.5 1.5 7.7-.2 9.1-3.7 1.5-3.6-.2-7.8-3.9-9.2-3.6-1.4-7.6.3-9.1 3.9-1.4 3.5.3 7.5 3.9 9zM9 39.5c3.6 1.5 7.8-.2 9.2-3.7 1.5-3.6-.2-7.8-3.9-9.1-3.6-1.5-7.6.2-9.1 3.8-1.4 3.5.3 7.5 3.8 9zM4.4 57.2c3.5 1.5 7.7-.2 9.1-3.8 1.5-3.6-.2-7.7-3.9-9.1-3.5-1.5-7.6.3-9.1 3.8-1.4 3.5.3 7.6 3.9 9.1zm38.3-21.4c3.5 1.5 7.7-.2 9.1-3.8 1.5-3.6-.2-7.7-3.9-9.1-3.6-1.5-7.6.3-9.1 3.8-1.3 3.6.4 7.7 3.9 9.1zm64.4-5.6c-3.6 1.5-7.8-.2-9.1-3.7-1.5-3.6.2-7.8 3.8-9.2 3.6-1.4 7.7.3 9.2 3.9 1.3 3.5-.4 7.5-3.9 9zm15.9 9.3c-3.6 1.5-7.7-.2-9.1-3.7-1.5-3.6.2-7.8 3.7-9.1 3.6-1.5 7.7.2 9.2 3.8 1.5 3.5-.3 7.5-3.8 9zm4.7 17.7c-3.6 1.5-7.8-.2-9.2-3.8-1.5-3.6.2-7.7 3.9-9.1 3.6-1.5 7.7.3 9.2 3.8 1.3 3.5-.4 7.6-3.9 9.1zM89.3 35.8c-3.6 1.5-7.8-.2-9.2-3.8-1.4-3.6.2-7.7 3.9-9.1 3.6-1.5 7.7.3 9.2 3.8 1.4 3.6-.3 7.7-3.9 9.1zM69.7 17.7l8.9 4.7V9.3l-8.9 2.8c-.2-.3-.5-.6-.9-.9L72.4 0H59.6l3.5 11.2c-.3.3-.6.5-.9.9l-8.8-2.8v13.1l8.8-4.7c.3.3.6.7.9.9l-5 15.4v.1c-.2.8-.4 1.6-.4 2.4 0 4.1 3.1 7.5 7 8.1h.2c.3 0 .7.1 1 .1.4 0 .7 0 1-.1h.2c4-.6 7.1-4.1 7.1-8.1 0-.8-.1-1.7-.4-2.4V34l-5.1-15.4c.4-.2.7-.6 1-.9zM66 92.8c16.9 0 32.8 1.1 47.1 3.2 4-16.9 8.9-26.7 14-33.5l-9.6-3.4c1 4.9 1.1 7.2 0 10.2-1.5-1.4-3-4.3-4.2-8.7L108.6 76c2.8-2 5-3.2 7.5-3.3-4.4 9.4-10 11.9-13.6 11.2-4.3-.8-6.3-4.6-5.6-7.9 1-4.7 5.7-5.9 8-.5 4.3-8.7-3-11.4-7.6-8.8 7.1-7.2 7.9-13.5 2.1-21.1-8 6.1-8.1 12.3-4.5 20.8-4.7-5.4-12.1-2.5-9.5 6.2 3.4-5.2 7.9-2 7.2 3.1-.6 4.3-6.4 7.8-13.5 7.2-10.3-.9-10.9-8-11.2-13.8 2.5-.5 7.1 1.8 11 7.3L80.2 60c-4.1 4.4-8 5.3-12.3 5.4 1.4-4.4 8-11.6 8-11.6H55.5s6.4 7.2 7.9 11.6c-4.2-.1-8-1-12.3-5.4l1.4 16.4c3.9-5.5 8.5-7.7 10.9-7.3-.3 5.8-.9 12.8-11.1 13.8-7.2.6-12.9-2.9-13.5-7.2-.7-5 3.8-8.3 7.1-3.1 2.7-8.7-4.6-11.6-9.4-6.2 3.7-8.5 3.6-14.7-4.6-20.8-5.8 7.6-5 13.9 2.2 21.1-4.7-2.6-11.9.1-7.7 8.8 2.3-5.5 7.1-4.2 8.1.5.7 3.3-1.3 7.1-5.7 7.9-3.5.7-9-1.8-13.5-11.2 2.5.1 4.7 1.3 7.5 3.3l-4.7-15.4c-1.2 4.4-2.7 7.2-4.3 8.7-1.1-3-.9-5.3 0-10.2l-9.5 3.4c5 6.9 9.9 16.7 14 33.5 14.8-2.1 30.8-3.2 47.7-3.2z"
            ></path>
          </svg>
          <span class="govuk-header__logotype-text">
            GOV.UK
          </span>
        </span>
        <span class="govuk-header__product-name">
          M365 Configuration as Code - Technical Guidance
        </span>
      </a>
    </div>
    <div class="govuk-header__content">
      <nav class="govuk-header__navigation govuk-header__navigation--end" aria-label="Menu">
        <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" aria-label="Show or hide menu">Menu</button>
        <ul id="navigation" class="govuk-header__navigation-list">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://github.com/ministryofjustice/Staff-Infrastructure-Microsoft365-DSC-Documentation">GitHub</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <button type="button" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </button>
        </div>

      <div class="app-pane__body" data-module="in-page-navigation">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents" tabindex="-1" aria-label="Table of contents" role="dialog">
              
              <button type="button" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></button>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading" data-module="collapsible-navigation">
                      <ul>
  <li>
    <a href="#managing-configuration"><span>Managing Configuration</span></a>
    <ul>
      <li>
        <a href="#data-files"><span>Data Files</span></a>
      </li>
      <li>
        <a href="#global-settings"><span>Global Settings</span></a>
        <ul>
          <li>
            <a href="#global"><span>Global</span></a>
          </li>
          <li>
            <a href="#enforced"><span>Enforced</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#tenant-specific-settings"><span>Tenant Specific Settings</span></a>
        <ul>
          <li>
            <a href="#tenant"><span>Tenant</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#example-configuration"><span>Example Configuration</span></a>
      </li>
      <li>
        <a href="#understanding-available-properties"><span>Understanding Available Properties</span></a>
      </li>
      <li>
        <a href="#exporting-existing-configurations"><span>Exporting Existing Configurations</span></a>
      </li>
      <li>
        <a href="#workflow"><span>Workflow</span></a>
        <ul>
          <li>
            <a href="#build-and-validation"><span>Build and Validation</span></a>
          </li>
          <li>
            <a href="#deployment"><span>Deployment</span></a>
          </li>
          <li>
            <a href="#compliance-testing"><span>Compliance Testing</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>


              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
            <h1 id="managing-configuration">Managing Configuration</h1>
<p>The following section details how the workload configuration is set between the various data files within the Configuration repository.</p>
<h2 id="data-files">Data Files</h2>
<p>A data file in PowerShell Desired State Configuration is a structured file that contains configuration data, such as node-specific settings and environment variables, which are used to customise and manage the desired state of target nodes (in this instance, tenants)</p>
<p>When reviewing the Configuration repository, you will see a folder called <code>datafiles</code>. This folder contains two child folders, one named <code>Tenants</code> and another called <code>templates</code></p>
<p>The <code>Tenants</code> folder contains all of the tenant specific configuration files, the <code>templates</code> folder contains all of the global configuration files that are to be applied to all tenants under the management of Microsoft 365 DSC.</p>
<h2 id="global-settings">Global Settings</h2>
<h3 id="global">Global</h3>
<p>The global layer data files define the workload settings that will be applied to all tenants that are under the management of Microsoft 365 DSC as the base configuration.</p>
<p>Location: <code>Staff-Infrastructure-Microsoft365-DSC-Configuration\DataFiles\Templates\Global\Global*.psd1</code></p>
<h3 id="enforced">Enforced</h3>
<p>The enforced data files define settings that are enforced for all tenants. Settings in this file must be present in the global files with the same values and cannot be specified in any of the tenants specific files.</p>
<p>These settings are validated using a to a unit test approach during the build pipeline, this is first validated against the global layer, requiring all settings that are present in the enforced data files to be configured exactly as specified in the related Global datafiles. If this test is successful a second unit test is carried out against the tenant layer checking that none of the settings are present within tenant specific files, preventing all settings in the Enforced layer from being overridden with different values.</p>
<p>Location: <code>Staff-Infrastructure-Microsoft365-DSC-Configuration\DataFiles\Templates\Enforced\Enforced*.psd1</code></p>
<h2 id="tenant-specific-settings">Tenant Specific Settings</h2>
<h3 id="tenant">Tenant</h3>
<p>These are the settings that are tenant specific. Either because the workload setting is specific to only that tenant so cannot be present in the global configuration, or because you want to override a setting from the Global layer (SettingX = 1 in Global, but for this tenant it should be SettingX = 2)</p>
<p>Location: <code>Staff-Infrastructure-Microsoft365-DSC-Configuration\DataFiles\Tenants\&lt;Tenant&gt;\&lt;TenantName&gt;&lt;WorkloadName&gt;.psd1</code></p>
<h2 id="example-configuration">Example Configuration</h2>
<p>The following section is intended to visualise how settings would be applied to DEV, NLE &amp; PROD based on how various workload settings were configured within different data files.</p>
<p>In this example, the <code>Global</code> configuration contains the following settings:</p>
<div class="highlight"><pre class="highlight powershell" tabindex="0"><code><span class="p">@{</span><span class="w">
    </span><span class="nx">NonNodeData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@{</span><span class="w">
        </span><span class="nx">Teams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@{</span><span class="w">
            </span><span class="nx">ChannelsPolicies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@(</span><span class="w">
                </span><span class="p">@{</span><span class="w">
                    </span><span class="nx">AllowOrgWideTeamCreation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$false</span><span class="w">
                    </span><span class="nx">AllowChannelSharingToExternalUser</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="bp">$true</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><p>In this example, the <code>Enforced</code> configuration contains the following settings:</p>
<div class="highlight"><pre class="highlight powershell" tabindex="0"><code><span class="p">@{</span><span class="w">
    </span><span class="nx">NonNodeData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@{</span><span class="w">
        </span><span class="nx">Teams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@{</span><span class="w">
            </span><span class="nx">ChannelsPolicies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@(</span><span class="w">
                </span><span class="p">@{</span><span class="w">
                    </span><span class="nx">AllowChannelSharingToExternalUser</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="bp">$true</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><p>In this example, the <code>DEV</code> tenant specific configuration contains the following settings:</p>
<div class="highlight"><pre class="highlight powershell" tabindex="0"><code><span class="p">@{</span><span class="w">
    </span><span class="nx">NonNodeData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@{</span><span class="w">
        </span><span class="nx">Teams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@{</span><span class="w">
            </span><span class="nx">ChannelsPolicies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@(</span><span class="w">
                </span><span class="p">@{</span><span class="w">
                    </span><span class="nx">AllowOrgWideTeamCreation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$true</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="nx">AzureAD</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@{</span><span class="w">
            </span><span class="nx">TenantDetails</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@(</span><span class="w">
                </span><span class="p">@{</span><span class="w">
                    </span><span class="nx">TenantId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">DEV</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><p>In this example, the <code>NLE</code> tenant specific configuration contains the following settings:</p>
<div class="highlight"><pre class="highlight powershell" tabindex="0"><code><span class="p">@{</span><span class="w">
    </span><span class="nx">NonNodeData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@{</span><span class="w">
        </span><span class="nx">Teams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@{</span><span class="w">
            </span><span class="nx">ChannelsPolicies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@(</span><span class="w">
                </span><span class="p">@{</span><span class="w">
                    </span><span class="nx">AllowOrgWideTeamCreation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$true</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="nx">AzureAD</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@{</span><span class="w">
            </span><span class="nx">TenantDetails</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@(</span><span class="w">
                </span><span class="p">@{</span><span class="w">
                    </span><span class="nx">TenantId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">NLE</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><p>In this example, the <code>PROD</code> tenant specific configuration contains the following settings:</p>
<div class="highlight"><pre class="highlight powershell" tabindex="0"><code><span class="p">@{</span><span class="w">
    </span><span class="nx">NonNodeData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@{</span><span class="w">
        </span><span class="nx">AzureAD</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@{</span><span class="w">
            </span><span class="nx">TenantDetails</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@(</span><span class="w">
                </span><span class="p">@{</span><span class="w">
                    </span><span class="nx">TenantId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">PROD</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><p>When the build pipeline runs, it will read and merge the various datafiles contained within the Configuration repository using the logic displayed within the diagram shown below, resulting in applied settings within each tenants MOF file shown at the bottom of the flow.</p>

<pre class="mermaid">
flowchart TD
    A[Build Pipeline start] --> B[Read and merge Enforced configuration files]
    B --> C[Read and merge Global configuration files]
    C --> D{Mandatory settings present in Global?}
    D -->|PASS| E[Read and merge Tenant-specific configuration files]
    D -->|FAIL| F[Error: Enforced settings missing in Global]
    E --> G{Enforced settings absent in Tenant?}
    G -->|PASS| H[Merge Global and Tenant configurations]
    G -->|FAIL| J[Error: Enforced settings present in Tenant]
    H --> I[Build script completed successfully]
    H --> J1[Applied Settings in MOF files]
    J1 --> K[DEV: 
        AllowChannelSharingToExternalUser = true,
        AllowOrgWideTeamCreation = true,
        TenantId = DEV]
    J1 --> L[NLE: 
        AllowChannelSharingToExternalUser = true,
        AllowOrgWideTeamCreation = true,
        TenantId = NLE]
    J1 --> M[PROD: 
        AllowChannelSharingToExternalUser = true,
        AllowOrgWideTeamCreation = false,
        TenantId = PROD]
</pre>
<h2 id="understanding-available-properties">Understanding Available Properties</h2>
<p>To understand the available properties and settings for a given version of Microsoft365DSC, you can use the M365DSC.CompositeResources module. This module provides a complete reference of all resources and settings.</p>
<p>To export an example data file to a location of your choice, follow these steps:
1. Install the M365DSC.CompositeResources module:</p>
<div class="highlight"><pre class="highlight powershell" tabindex="0"><code><span class="w">
    </span><span class="n">Install-Module</span><span class="w"> </span><span class="nt">-Name</span><span class="w"> </span><span class="nx">M365DSC.CompositeResources</span><span class="w"> </span><span class="nt">-Force</span><span class="w">

</span></code></pre></div>
<ol>
<li>Run the following command to generate an example data file:</li>
</ol>
<div class="highlight"><pre class="highlight powershell" tabindex="0"><code><span class="w">
    </span><span class="n">New-M365DSCExampleDataFile</span><span class="w"> </span><span class="nt">-OutputPath</span><span class="w"> </span><span class="s2">"C:\Path\To\Output"</span><span class="w">

</span></code></pre></div><p>This will create a sample configuration file with all available properties.</p>
<p>For more details, refer to the <a href="https://github.com/ykuijs/M365DSC.CompositeResources/blob/main/source/Public/New-M365DSCExampleDataFile.ps1">New-M365DSCExampleDataFile documentation</a></p>
<h2 id="exporting-existing-configurations">Exporting Existing Configurations</h2>
<p>You can export the existing configuration from a tenant using the Export Pipeline. This pipeline produces an artifact containing both the raw DSC output and the composite module (where available) for the workloads defined in the tenants generic file.</p>

<ul>
<li>Pipeline: <code>Staff-Infrastructure-Microsoft365-DSC-Configuration\Pipelines\export.yaml</code></li>
<li>Script: <code>Staff-Infrastructure-Microsoft365-DSC-Infrastructure\Scripts\Export.ps1</code></li>
</ul>
<h2 id="workflow">Workflow</h2>

<ol>
<li>Admin creates a new branch from the <code>main</code> Staff-Infrastructure-Microsoft365-DSC-Configuration repository, with a name relevant to the change they are making e.g. <code>DEV-TeamsMeetingPolicy-update</code></li>
<li>Admin makes the required configuration changes to the data files necessary to the change they are making</li>
<li>Admin commits and syncs the changes to the feature branch</li>
<li>Admin creates a pull request (PR) to merge the changes to the <code>main</code> repository, proving a description of what changes have been made to allow others to more efficiently peer review the work</li>
<li>The build pipeline runs on the PR</li>
<li>Depending on the files that have been changed the relevant lead engineers or architects will be asked to review and approve the change, this is defined based on the content of the <code>codeowners</code> file</li>
<li>The merged PR triggers a pipeline to compile Managed Object Format (MOF) files. The pipeline calls Azure Key Vault to retrieve the credentials that are used by the tenant specific service principle(s) in the MOF files, and publishes the artifacts ready for deployment</li>
<li>The deployment pipeline is triggered that uses the compiled MOF files to deploy configuration changes to the tenants that are managed via Microsoft365DSC</li>
<li>Admin who committed the changes reviews the relevant pipeline &amp; config in the M365 admin center to confirm the expected changes have been successfully applied</li>
</ol>
<h3 id="build-and-validation">Build and Validation</h3>

<ol>
<li><p>Build Pipeline (build.yaml):</p>

<ul>
<li>Compiles MOF files from tenant configuration data.</li>
<li>Copies necessary scripts and resources to the output directory.</li>
</ul></li>
<li><p>Pull Request Validation (prvalidation.yaml):</p>

<ul>
<li>Validates configuration changes in pull requests.</li>
<li>Ensures compliance with naming and encoding standards.</li>
</ul></li>
</ol>
<h3 id="deployment">Deployment</h3>

<ol>
<li><p>Dependency Management (dependencies.yaml):</p>

<ul>
<li>Retrieves secrets from Azure Key Vault.</li>
<li>Prepares dependencies for deployment.</li>
</ul></li>
<li><p>Deployment Pipeline (deployment.yaml):</p>

<ul>
<li>Deploys configurations to Microsoft 365 tenants.</li>
<li>Executes orchestration logic from the Infrastructure repository.</li>
</ul></li>
</ol>
<h3 id="compliance-testing">Compliance Testing</h3>

<ol>
<li><p>Compliance Testing Pipeline (testcompliancy.yaml):</p>

<ul>
<li>Tests tenant compliance with desired configurations.</li>
<li>Generates HTML compliance reports.</li>
</ul></li>
<li><p>Export Pipeline (export.yaml):</p>

<ul>
<li>Deploys configurations to Microsoft 365 tenants.</li>
<li>Exports tenant configurations for auditing and traceability.</li>
</ul></li>
</ol>

<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
  mermaid.initialize({
    startOnLoad: true,
    theme: 'base',
    themeVariables: {
      primaryColor: '#C4C4C4', // GOV UK blue colour
      primaryTextColor: '#ffffff', // White text for contrast
      primaryBorderColor: '#A8A8A8', // Darker blue border
      lineColor: '#333333', // Dark grey lines
      secondaryColor: 'C4C4C4', // Default codeblock colour for decision text boxes
    }
  });
</script>

            
          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/ministryofjustice/Staff-Infrastructure-Microsoft365-DSC-Documentation/blob/main/source/documentation/managing-configuration.html.md.erb">View source</a></li>
                <li><a href="https://github.com/ministryofjustice/Staff-Infrastructure-Microsoft365-DSC-Documentation/issues/new?body=Problem+with+%27%27+%28https%3A%2F%2Fministryofjustice.github.io%2FStaff-Infrastructure-Microsoft365-DSC-Documentation%2Fdocumentation%2Fmanaging-configuration.html%29&amp;labels=bug&amp;title=Re%3A+%27%27">Report problem</a></li>
                <li><a href="https://github.com/ministryofjustice/Staff-Infrastructure-Microsoft365-DSC-Documentation">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">


      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >Â© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="../javascripts/application.js"></script>
  </body>
</html>
