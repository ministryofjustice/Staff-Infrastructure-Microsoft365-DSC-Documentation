
# Governance

This page provides a comprehensive guide to managing code ownership, branch protection, and file authoring workflows in the Microsoft365DSC repositories. It explains how to configure the CODEOWNERS file, enforce branch protection rules, and establish workflows for workload and platform administrators.

### Code Ownership with CODEOWNERS

The CODEOWNERS file in GitHub is used to assign responsibility for specific files or directories to teams. This ensures that the appropriate teams are automatically requested as reviewers for pull requests (PRs) affecting their areas of responsibility.

#### Example CODEOWNERS File

```plaintext
# Platform Admins Team
# Responsible for managing core files such as generic files and pipelines
**/*#Generic.psd1 @ministryofjustice/eucs-automation-platform-admins
Pipelines/* @ministryofjustice/eucs-automation-platform-admins

# Modern Workplace Admins Team
# Responsible for managing workload-specific configurations across tenant, global, and enforced layers
DataFiles/Templates/Global/* @ministryofjustice/eucs-modern-workplace-admins
DataFiles/Templates/Enforced/* @ministryofjustice/eucs-modern-workplace-admins
DataFiles/Tenants/* @ministryofjustice/eucs-modern-workplace-admins

# Default ownership for all other files
* @ministryofjustice/eucs-automation-platform-admins
```

#### Key Points

The platform admin team are assigned ownership of:

		* All generic.psd1 files  
		* All pipeline files

This ensures that platform administrators manage the core files and CI/CD pipelines.

The workload product team e.g. Modern Workplace Admins Team are assigned ownership of:

		* Global settings: DataFiles/Templates/Global/*
		* Enforced settings: DataFiles/Templates/Enforced/*
		* Tenant-specific settings: DataFiles/Tenants/*

This ensures that workload administrators manage configurations for their respective workloads across all layers.

All other files are assigned to the eucs-automation-platform-admins team by default: *. 

### Branch Protection Rules

Branch protection rules enforce policies on protected branches (e.g., main, develop) to ensure that changes are reviewed, validated, and approved before merging.

The branch protection policies are configured as below:
XXXXXXXXX
XXXXXXXXX
XXXXXXXXX

### File Authoring Workflows

1. Create a Feature Branch: Workload admins create a feature branch (e.g., feature/<workload-change>) to make changes to their workload-specific data files.
2. Make Changes:Update the relevant files in their workload (e.g., OneDrive.psd1 or Exchange.psd1).
3. Submit a Pull Request: Submit a PR to merge the feature branch into the main or develop branch.
4. Review and Approval: The CODEOWNERS file ensures that the relevant product teams admin GitHub team members are automatically requested as reviewers for changes to workload-specific files.
5. Merge: Once the PR is approved and all CI/CD checks pass, the workload admins can merge the changes into the protected branch.

### Summary

#### Workload Admins:

* Contribute to workload-specific files (e.g., DataFiles/Templates/Global/*, DataFiles/Templates/Enforced/*, DataFiles/Tenants/*).
* Must use the feature branch and PR workflow.
* Cannot directly push to protected branches.

#### Platform Admins:

* Contribute to core files (e.g., **/*#Generic.psd1, Pipelines/*).
* Use the feature branch and PR workflow for regular changes.
* Have direct push access to protected branches for hotfixes or emergencies.

#### Branch Protection Rules:

* Enforce PR-based workflows for all changes.
* Require reviews from code owners and passing CI/CD checks.
* Restrict direct push access to eucs-automation-platform-admins.
